<%
    const drawingName = typeof drawingData !== 'undefined' && drawingData ? drawingData.friendlyName : 'Drawing';
    const categoryName = typeof drawingData !== 'undefined' && drawingData && drawingData.category ? drawingData.category.friendlyName : 'Category';
    const categorySlug = typeof drawingData !== 'undefined' && drawingData && drawingData.category ? drawingData.category.slug : '';
    const drawingSlug = typeof drawingData !== 'undefined' && drawingData ? drawingData.slug : '';
    
    const breadcrumbItems = [
        { name: 'Home', url: '/' },
        { 
            name: categoryName, 
            url: categorySlug ? `/en/${encodeURIComponent(categorySlug)}` : '#',
            current: false
        }
    ];
%>
<div class="paint-container">
    <aside class="color-palette">
        <header>
            <a href="#" id="back-link" class="back-link">‚Üê Back</a>
            <h2>Colors</h2>
        </header>
        <div id="color-grid" class="color-grid">
            <!-- Cores ser√£o carregadas aqui -->
        </div>
    </aside>
    <main class="drawing-area">
        <div class="custom-drawing-section paint-custom-drawing">
            <form id="custom-drawing-form" class="custom-drawing-form">
                <div class="form-row">
                    <input
                        type="text"
                        id="drawing-theme"
                        placeholder="‚ú® Describe what you want to paint and AI will create it (e.g., a cat, a princess, a car...)"
                        required
                        class="theme-input"
                    >
                    <button type="submit" class="generate-button" id="generate-btn">
                        ‚ö° Generate with AI
                    </button>
                </div>
            </form>
            <div id="generation-overlay" class="generation-overlay">
                <div class="overlay-spinner"></div>
                <div class="overlay-message">Generating your drawing. This can take up to 15 seconds.</div>
            </div>
        </div>
        <!-- Mensagem explicativa para mobile -->
        <div class="mobile-message">
            üì± The painting feature is only available on tablets and desktops. On mobile, you can view and download the drawings.
        </div>
        <div class="drawing-header">
            <div class="breadcrumb-wrapper">
                <%- include('../partials/breadcrumb', { breadcrumb: breadcrumbItems, breadcrumbClass: 'breadcrumb-paint' }) %>
            </div>
            <div class="download-buttons">
                <a href="javascript:void(0)" id="download-link" class="download-link" title="Download colored image">‚¨á Download Colored</a>
                <a href="javascript:void(0)" id="download-blank-link" class="download-link" title="Download blank image">‚¨á Download Blank</a>
            </div>
            <h1 id="drawing-title"><%= drawingName %> Coloring Page</h1>
        </div>
        <!-- Container para imagem est√°tica em mobile -->
        <div id="mobile-image-container" class="mobile-image-container">
            <img id="mobile-image" src="" alt="<%= drawingName %>" />
        </div>
        <div id="canvas-container" class="canvas-container">
            <!-- Canvas ser√° criado aqui -->
        </div>
    </main>
</div>
